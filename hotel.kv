# : import Factory kivy.factory.Factory

# MainWindow:
#     LoginWindow:
#     PrimaryWindow:
#     OvernightWindow:
#     RestWindow:

<FlatButton@ButtonBehavior+Label>:
    font_size: 16

<Button>:
    font_name: 'fonts/ARIALUNI.TTF'
    # font_name: '../fonts/ARIALUNI.TTF'

<Label>:
    font_name: 'fonts/ARIALUNI.TTF'
    # font_name: '../fonts/ARIALUNI.TTF'

<TextInput>
    font_name: 'fonts/ARIALUNI.TTF'
    # font_name: '../fonts/ARIALUNI.TTF'

<Spinner>
    font_name: 'fonts/ARIALUNI.TTF'
    # font_name: '../fonts/ARIALUNI.TTF'

<LoginWindow>:
    name: 'screen_login'
    BoxLayout:
        orientation: 'vertical'
        id: main_win
        spacing: 10
        space_x: self.size[0]/3

        #draw background
        canvas.before:
            Color:
                rgba: (1,1,1,1)
            Rectangle:
                size: self.size
                pos: self.pos

        BoxLayout:
            size_hint_y: None
            height: 50
            canvas.before:
                Color:
                    rgba: (.06,.5,.5,1)
                Rectangle:
                    size: self.size
                    pos:self.pos
            Label:
                text: "旅館系統登入"
                bold: True
                size_hint_x: 0.9
            FlatButton:
                text: "x"
                size_hint_x: 0.1

        BoxLayout:
            orientation: 'vertical'
            padding: main_win.space_x, 10 #if only one val it'll be used for all four sides
            spacing: 20

            BoxLayout:
                orientation: 'vertical'
                spacing: 10
                size_hint_y: None
                height: 100

                Label:
                    id: info
                    text: ''
                    markup: True
                    size_hint_y: None
                    height: 20

                TextInput:
                    id: username_field
                    hint_text: '帳號'
                    multiline: False
                    focus:True
                    on_text_validate: pwd_field.focus = True
                TextInput:
                    id:pwd_field
                    hint_text: '密碼'
                    multiline: False
                    password: True
                    on_text_validate: root.validate_user()
            Label: #empty label to remove empty space
                id: sp
                size_hint_y:None
                height: 10
            Button:
                text:'登入'
                size_hint_y: None
                height: 40
                background_color: (.06,.5,.5,1)
                background_normal: '' #remove shades on button
                on_release: root.validate_user()
            Label: #empty label to remove empty space
                id: sp2

<PrimaryWindow>
    name: 'screen_primary'
    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            orientation: 'horizontal'
            # size_hint_y: 0.95
            GridLayout:
                id: content
                size_hint_x:0.85
                cols: 5

            BoxLayout:
                orientation: 'vertical'
                size_hint_x: 0.15
                Label:
                    text: '房間'
                TextInput:
                    id: room_selected
                    hint_text: '在此輸入房間'
                    multiline: False
                    # on_text_validate: root.validate_room()
                Button:
                    id: rest_button
                    text: '休息'
                    disabled: True
                    on_press: root.parent.current = 'screen_rest'
                Button:
                    id: overnight_button
                    text: '住宿'
                    disabled: True
                    on_press: root.parent.current = 'screen_overnight'
                Button:
                    id: checkout_button
                    text: '退房'
                    disabled: True
                    # on_press: Factory.AreYouSurePopup().open()
                    on_press: root.wipe_room_check()
                Button:
                    id: cleaned_button
                    text: '打掃'
                    disabled: True
                    on_press: root.clean_room()
                Button:
                    id: finished_cleaning_button
                    text: '打掃完畢'
                    disabled: True
                    on_press: root.finished_cleaning_room()
                Button:
                    id: additional_hour_button
                    text: '加休/加住'
                    disabled: True
                Button:
                    id: shiftchange_button
                    text: '交班'
                    on_press: root.shiftchange_check()
                # Button:
                #     id: daily_sheet_button
                #     text: '日報表'
                    # on_press: root.daily_sheet()
        # BoxLayout:
        #     orientation: 'horizontal'
        #     size_hint_y: 0.05
        #     Label:
        #         size_hint_x: 0.1
        #         text: '愈時'
        #     Label:
        #         id: room_near_checkout
        #         size_hint_x: 0.4
        #         text: ''
        #     Label:
        #         size_hint_x: 0.1
        #         text: '超時'
        #     Label:
        #         id: room_past_checkout
        #         size_hint_x: 0.4
        #         text: ''

<OvernightWindow>
    name: 'screen_overnight'
    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            size_hint_y: 0.07
            orientation: 'horizontal'

            Label:
                text: '房間'
                size_hint_x: 0.05
            Label:
                id: overnight_room
                text: ''
                size_hint_x: 0.05
            Label:
                text: '姓名'
                size_hint_x: 0.05
            TextInput:
                id: overnight_room_name
                multiline: False
                size_hint_x:0.2
            Label:
                text: '身分證'
                size_hint_x: 0.05
            TextInput:
                id: overnight_room_id
                multiline: False
                size_hint_x:0.2
            Label:
                text: '出生日期'
                size_hint_x: 0.1

            TextInput:
                id: overnight_room_dob
                multiline: False
                size_hint_x:0.1
                hint_text: 'xx.xx.xxxx'
        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: 0.07
            Label:
                text: '電話'
                size_hint_x: 0.1
            TextInput:
                id: overnight_room_phone_number
                size_hint_x: 0.4
            Label:
                text: '信箱'
                size_hint_x: 0.1
            TextInput:
                id: overnight_room_email
                size_hint_x: 0.4
        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: 0.16
            TextInput:
                id: overnight_room_etc
                hint_text: '備註'
                size_hint_x: 0.6

        BoxLayout:
            size_hint_y: 0.15
            orientation: 'horizontal'
            Label:
                text: '入住時間'
            Label:
                id: overnight_room_checkInDate
                text: ''

        BoxLayout:
            size_hint_y: 0.15
            orientation: 'horizontal'
            Button:
                on_press: root.show_calendar()
                text: '點此選擇退房日期'
            Label:
                id: overnight_room_checkOutDate
                text: ''
        BoxLayout:
            size_hint_y: 0.1
            orientation: 'horizontal'
            Label:
                text: '入住天數'
            Label:
                id: overnight_room_days
                text: ''
        BoxLayout:
            size_hint_y: 0.1
            orientation: 'horizontal'
            Label:
                text: '每日價格'
            TextInput:
                id: overnight_room_price
                input_filter: 'int'
                multiline: False
        BoxLayout:
            size_hint_y: 0.1
            orientation: 'horizontal'
            Label:
                text: '總額:'
            Label:
                id: overnight_total
                text: ''

        BoxLayout:
            size_hint_y: 0.1
            orientation: 'horizontal'
            Button:
                id: overnight_confirm
                text: '確認'
                on_press: root.store_info()
                on_release: root.parent.current = 'screen_primary'

            Button:
                id: overnight_decline
                text: '取消'
                on_press: root.wipe_input_boxes()
                on_release: root.parent.current = 'screen_primary'

<RestWindow>
    name: 'screen_rest'
    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            size_hint_y: 0.07
            orientation: 'horizontal'

            Label:
                text: '房間'
                size_hint_x: 0.05
            Label:
                id: rest_room
                text: ''
                size_hint_x: 0.05
            Label:
                text: '姓名'
                size_hint_x: 0.05
            TextInput:
                id: rest_room_name
                multiline: False
                size_hint_x:0.2
            Label:
                text: '身分證'
                size_hint_x: 0.05
            TextInput:
                id: rest_room_id
                multiline: False
                size_hint_x:0.2
            Label:
                text: '出生日期'
                size_hint_x: 0.1

            TextInput:
                id: rest_room_dob
                multiline: False
                size_hint_x:0.1
                hint_text: 'xx.xx.xxxx'
        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: 0.07
            Label:
                text: '電話'
                size_hint_x: 0.1
            TextInput:
                id: rest_room_phone_number
                size_hint_x: 0.4
            Label:
                text: '信箱'
                size_hint_x: 0.1
            TextInput:
                id: rest_room_email
                size_hint_x: 0.4
        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: 0.16
            TextInput:
                id: rest_room_etc
                hint_text: '備註'
                size_hint_x: 0.6

        BoxLayout:
            size_hint_y: 0.2
            orientation: 'horizontal'
            Label:
                text: '入住時間'
            Label:
                id: rest_room_checkInDate
                text: ''

        BoxLayout:
            size_hint_y: 0.1
            orientation: 'horizontal'
            Label:
                text: '退房時間'
            OneIntInput:
                id: rest_room_hour
                font_name: 'fonts/ARIALUNI.TTF'
                input_filter: 'int'
                min_value : 1
                max_value : 9
                hint_text : '請輸入數字在於{}跟{}'.format(self.min_value, self.max_value)
            Label:
                id: rest_room_checkOutDate
                text: ''
        BoxLayout:
            size_hint_y: 0.2
            Label:
                text: '價格'
            TextInput:
                id: rest_room_price
                multiline: False

        BoxLayout:
            size_hint_y: 0.2
            orientation: 'horizontal'
            Button:
                id: rest_confirm
                text: '確認'
                on_press: root.store_info()
                on_release: root.parent.current = 'screen_primary'
            Button:
                id: rest_decline
                text: '取消'
                on_press: root.wipe_input_boxes()
                on_release: root.parent.current = 'screen_primary'

<DatePicker>:
    pHint: .4, .4
