# : import Factory kivy.factory.Factory

<MainWindow>:
    id_add_change:id_add_change
    id_rest:id_rest
    id_overnight:id_overnight
    LoginWindow:
    PrimaryWindow:
    OvernightWindow:
        id:id_overnight
    RestWindow:
        id:id_rest
    AddChangeWindow:
        id:id_add_change


<MDRaisedButton>:
    font_name: 'fonts/ARIALUNI.TTF'

<Button>:
    font_name: 'fonts/ARIALUNI.TTF'

<MDLabel>:
    font_name: 'fonts/ARIALUNI.TTF'

<TextInput>
    font_name: 'fonts/ARIALUNI.TTF'

<Spinner>
    font_name: 'fonts/ARIALUNI.TTF'

<LoginWindow>:
    name: 'screen_login'
    BoxLayout:
        orientation: 'vertical'
        id: main_win
        spacing: 10
        space_x: self.size[0]/3

        #draw background
        canvas.before:
            Color:
                rgba: (1,1,1,1)
            Rectangle:
                size: self.size
                pos: self.pos

        BoxLayout:
            size_hint_y: None
            height: 50
            canvas.before:
                Color:
                    rgba: (.06,.5,.5,1)
                Rectangle:
                    size: self.size
                    pos:self.pos
            MDLabel:
                text: "旅館系統登入"
                bold: True
                size_hint_x: 0.9

        BoxLayout:
            orientation: 'vertical'
            padding: main_win.space_x, 10 #if only one val it'll be used for all four sides
            spacing: 20

            BoxLayout:
                orientation: 'vertical'
                spacing: 10
                size_hint_y: None
                height: 100

                MDLabel:
                    id: info
                    text: ''
                    markup: True
                    size_hint_y: None
                    height: 20

                TextInput:
                    id: username_field
                    hint_text: '帳號'
                    multiline: False
                    focus:True
                    on_text_validate: pwd_field.focus = True
                TextInput:
                    id:pwd_field
                    hint_text: '密碼'
                    multiline: False
                    password: True
                    on_text_validate: root.validate_user()
            MDLabel: #empty MDLabel to remove empty space
                id: sp
                size_hint_y:None
                height: 10
            Button:
                text:'登入'
                size_hint_y: None
                height: 40
                background_color: (.06,.5,.5,1)
                background_normal: '' #remove shades on Button
                on_release: root.validate_user()
            MDLabel: #empty MDLabel to remove empty space
                id: sp2

<PrimaryWindow>
    name: 'screen_primary'
    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            orientation: 'horizontal'
            # size_hint_y: 0.95
            GridLayout:
                id: content
                size_hint_x:0.85
                cols: 5

            BoxLayout:
                orientation: 'vertical'
                size_hint_x: 0.15
                MDLabel:
                    text: '房間'
                TextInput:
                    id: room_selected
                    hint_text: '在此輸入房間'
                    multiline: False
                    input_filter: 'int'
                    # on_text_validate: root.validate_room()
                Button:
                    id: rest_button
                    text: '休息'
                    disabled: True
                    on_press: root.rest_room_selected(root.manager)
                    on_release: root.parent.current = 'screen_rest'
                Button:
                    id: overnight_button
                    text: '住宿'
                    disabled: True
                    on_press: root.overnight_room_selected(root.manager)
                    on_release: root.parent.current = 'screen_overnight'
                Button:
                    id: checkout_button
                    text: '退房'
                    disabled: True
                    on_press: root.wipe_room_check()
                Button:
                    id: cleaned_button
                    text: '打掃'
                    disabled: True
                    on_press: root.clean_room()
                Button:
                    id: finished_cleaning_button
                    text: '打掃完畢'
                    disabled: True
                    on_press: root.finished_cleaning_room()
                Button:
                    id: additional_hour_button
                    text: '加休/住、改資料'
                    disabled: True
                    on_press: root.fill_data_to_add_change_screen(root.parent)
                    on_release: root.parent.current = 'screen_add_change'

                Button:
                    id: shiftchange_button
                    text: '交班'
                    on_press: root.shiftchange_check()
                Button:
                    id: daily_sheet_button
                    text: '報表'
                    on_press: root.get_report()

<OvernightWindow>
    name: 'screen_overnight'
    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            orientation: 'horizontal'

            MDLabel:
                text: '房間'
                size_hint_x: 0.05
            MDLabel:
                id: overnight_room
                text: ''
                size_hint_x: 0.05
            MDLabel:
                text: '姓名'
                size_hint_x: 0.05
            TextInput:
                id: overnight_room_name
                multiline: False
                size_hint_x:0.2
            MDLabel:
                text: '身分證'
                size_hint_x: 0.05
            TextInput:
                id: overnight_room_id
                multiline: False
                size_hint_x:0.2
            MDLabel:
                text: '出生日期'
                size_hint_x: 0.1

            TextInput:
                id: overnight_room_dob
                multiline: False
                size_hint_x:0.1
                hint_text: 'xx.xx.xxxx'
        BoxLayout:
            orientation: 'horizontal'
            MDLabel:
                text: '電話'
                size_hint_x: 0.1
            TextInput:
                id: overnight_room_phone_number
                size_hint_x: 0.4
            MDLabel:
                text: '信箱'
                size_hint_x: 0.1
            TextInput:
                id: overnight_room_email
                size_hint_x: 0.4
        BoxLayout:
            orientation: 'horizontal'
            TextInput:
                id: overnight_room_etc
                hint_text: '備註'
                size_hint_x: 0.6

        BoxLayout:
            orientation: 'horizontal'
            MDLabel:
                text: '入住時間'
            MDLabel:
                id: overnight_room_checkInDate
                text: ''

        BoxLayout:
            orientation: 'horizontal'
            Button:
                on_press: root.show_datepicker()
                text: '點此選擇退房日期'
            MDLabel:
                id: overnight_room_checkOutDate
                text: ''

        BoxLayout:
            orientation: 'horizontal'
            MDLabel:
                text: '付款方式'
            Spinner:
                id: overnight_payment_option
                values: ['信用卡','現金','禮卷','匯款','其他']
                # on_text: root.overnight_spinner_clicked(overnight_payment_option.text)

        BoxLayout:
            orientation: 'horizontal'
            MDLabel:
                text: '入住天數'
            MDLabel:
                id: overnight_room_days
                text: ''
        BoxLayout:
            orientation: 'horizontal'
            MDLabel:
                text: '每日價格'
            TextInput:
                id: overnight_room_price
                input_filter: 'int'
                multiline: False
        BoxLayout:
            orientation: 'horizontal'
            MDLabel:
                text: '總額:'
            MDLabel:
                id: overnight_total
                text: ''

        BoxLayout:
            orientation: 'horizontal'
            Button:
                id: overnight_confirm
                text: '確認'
                on_press: root.store_info()
                on_release: root.parent.current = 'screen_primary'

            Button:
                id: overnight_decline
                text: '取消'
                on_press: root.wipe_input_boxes()
                on_release: root.parent.current = 'screen_primary'

<RestWindow>
    name: 'screen_rest'
    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            orientation: 'horizontal'

            MDLabel:
                text: '房間'
                size_hint_x: 0.05
            MDLabel:
                id: rest_room
                text: ''
                size_hint_x: 0.05
            MDLabel:
                text: '姓名'
                size_hint_x: 0.05
            TextInput:
                id: rest_room_name
                multiline: False
                size_hint_x:0.2
            MDLabel:
                text: '身分證'
                size_hint_x: 0.05
            TextInput:
                id: rest_room_id
                multiline: False
                size_hint_x:0.2
            MDLabel:
                text: '出生日期'
                size_hint_x: 0.1

            TextInput:
                id: rest_room_dob
                multiline: False
                size_hint_x:0.1
                hint_text: 'xx.xx.xxxx'
        BoxLayout:
            orientation: 'horizontal'
            MDLabel:
                text: '電話'
                size_hint_x: 0.1
            TextInput:
                id: rest_room_phone_number
                size_hint_x: 0.4
            MDLabel:
                text: '信箱'
                size_hint_x: 0.1
            TextInput:
                id: rest_room_email
                size_hint_x: 0.4
        BoxLayout:
            orientation: 'horizontal'
            TextInput:
                id: rest_room_etc
                hint_text: '備註'
                size_hint_x: 0.6

        BoxLayout:
            orientation: 'horizontal'
            MDLabel:
                text: '入住時間'
            MDLabel:
                id: rest_room_checkInDate
                text: ''

        BoxLayout:
            orientation: 'horizontal'
            MDLabel:
                text: '退房時間'
            Spinner:
                id: rest_room_hour
                font_name: 'fonts/ARIALUNI.TTF'
                values: ['1','2','3','4','5','6','7','8','9']
                on_text: root.rest_spinner_clicked(rest_room_hour.text)
            MDLabel:
                id: rest_room_checkOutDate
                text: ''
        BoxLayout:
            orientation: 'horizontal'
            MDLabel:
                text: '付款方式'
            Spinner:
                id: rest_payment_option
                values: ['信用卡','現金','禮卷','匯款','其他']
        BoxLayout:
            MDLabel:
                text: '價格'
            TextInput:
                id: rest_room_price
                multiline: False

        BoxLayout:
            orientation: 'horizontal'
            Button:
                id: rest_confirm
                text: '確認'
                on_press: root.store_info()
                on_release: root.parent.current = 'screen_primary'
            Button:
                id: rest_decline
                text: '取消'
                on_press: root.wipe_input_boxes()
                on_release: root.parent.current = 'screen_primary'

<AddChangeWindow>
    name: 'screen_add_change'
    add_change_room: add_change_room
    add_change_room_checkInDate: add_change_room_checkInDate
    add_change_room_checkOutDate: add_change_room_checkOutDate
    add_change_room_dob: add_change_room_dob
    add_change_room_email: add_change_room_email
    add_change_room_etc: add_change_room_etc
    add_change_room_id: add_change_room_id
    add_change_room_name: add_change_room_name
    add_change_room_phone_number: add_change_room_phone_number
    add_change_room_price: add_change_room_price
    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            orientation: 'horizontal'

            MDLabel:
                text: '房間'
                size_hint_x: 0.05
            TextInput:
                id: add_change_room
                text: ''
                size_hint_x: 0.05
            MDLabel:
                text: '姓名'
                size_hint_x: 0.05
            TextInput:
                id: add_change_room_name
                multiline: False
                size_hint_x:0.2
            MDLabel:
                text: '身分證'
                size_hint_x: 0.05
            TextInput:
                id: add_change_room_id
                multiline: False
                size_hint_x:0.2
            MDLabel:
                text: '出生日期'
                size_hint_x: 0.1

            TextInput:
                id: add_change_room_dob
                multiline: False
                size_hint_x:0.1
                hint_text: 'xx.xx.xxxx'
        BoxLayout:
            orientation: 'horizontal'
            MDLabel:
                text: '電話'
                size_hint_x: 0.1
            TextInput:
                id: add_change_room_phone_number
                size_hint_x: 0.4
            MDLabel:
                text: '信箱'
                size_hint_x: 0.1
            TextInput:
                id: add_change_room_email
                size_hint_x: 0.4
        BoxLayout:
            orientation: 'horizontal'
            TextInput:
                id: add_change_room_etc
                hint_text: '備註'
                size_hint_x: 0.6

        BoxLayout:
            orientation: 'horizontal'
            MDLabel:
                text: '入住時間'
            MDLabel:
                id: add_change_room_checkInDate
                text: ''
        BoxLayout:
            orientation: 'horizontal'
            MDLabel:
                text: '付款方式'
            Spinner:
                id: add_change_payment_option
                values: ['信用卡','現金','禮卷','匯款','其他']
        BoxLayout:
            orientation: 'horizontal'
            MDLabel:
                text: '加幾天'
            OneIntInput:
                id: add_change_room_days
                font_name: 'fonts/ARIALUNI.TTF'
                input_filter: 'int'
                min_value : 1
                max_value : 9
                on_text: root.add_time()
                hint_text : '請輸入數字在於{}跟{}'.format(self.min_value, self.max_value)
        BoxLayout:
            orientation: 'horizontal'
            MDLabel:
                text: '加幾小時'
            OneIntInput:
                id: add_change_room_hour
                font_name: 'fonts/ARIALUNI.TTF'
                input_filter: 'int'
                min_value : 1
                max_value : 9
                on_text: root.add_time()
                hint_text : '請輸入數字在於{}跟{}'.format(self.min_value, self.max_value)

        BoxLayout:
            MDLabel:
                text: '退房時間'
            MDLabel:
                id: add_change_room_checkOutDate
                text: ''
        BoxLayout:
            MDLabel:
                text: '價格'
            TextInput:
                id: add_change_room_price
                multiline: False

        BoxLayout:
            orientation: 'horizontal'
            Button:
                id: add_change_confirm
                text: '確認'
                on_press: root.update_info()
                on_release: root.parent.current = 'screen_primary'
            Button:
                id: add_change_decline
                text: '取消'
                on_press: root.wipe_input_boxes()
                on_release: root.parent.current = 'screen_primary'
